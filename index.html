<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>সবকিছু.com – এক ক্লিকে সবকিছু।</title>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    :root {
      --primary-color: #158b45;
      --secondary-color: #d6bc13;
      --body-bg: #f8fff7;
      --text-color: #222;
      --header-bg: #fff;
      --card-bg: #fff;
      --footer-bg: #e0f0e0;
      --modal-bg: #fefefe;
    }
    .dark-mode {
      --primary-color: #22b464;
      --secondary-color: #fff176;
      --body-bg: #101e13;
      --text-color: #e0e0e0;
      --header-bg: #1e1e1e;
      --card-bg: #2d2d2d;
      --footer-bg: #333333;
      --modal-bg: #2d2d2d;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Hind Siliguri', sans-serif; background: var(--body-bg); color: var(--text-color); transition: background-color 0.3s, color 0.3s; position: relative; }
    #preloader {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 9999;
      background-color: var(--body-bg);
      display: flex; justify-content: center; align-items: center;
      transition: opacity 0.75s ease, visibility 0.75s ease;
    }
    #preloader .loader {
      border: 8px solid #f3f3f3;
      border-top: 8px solid var(--primary-color);
      border-radius: 50%;
      width: 70px; height: 70px;
      animation: spin 1s linear infinite;
    }
    .dark-mode #preloader .loader {
      border-color: #444;
      border-top-color: var(--primary-color);
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    #preloader.hidden { opacity: 0; visibility: hidden; }

    .bg-jolcap {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: -1; opacity: 0.13;
      background: url('logo_2.jpg') center center no-repeat;
      background-size: 50vw 50vw;
      pointer-events: none;
    }
    @media (max-width: 768px) {
      .bg-jolcap { background-size: 100vw 100vw; }
    }

    header { background: var(--header-bg); box-shadow: 0 2px 5px rgba(0,0,0,0.10); padding: 10px 25px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
    .header-left { display: flex; align-items: center; gap: 15px; }
    .header-left .logo-link img { max-width: 90px; }
    .site-title h1 { font-size: 26px; color: var(--primary-color); font-weight: bold; }
    .site-title p { font-size: 15px; color: #555; }
    .header-right { display: flex; align-items: center; gap: 18px; }
    .social-icons a, .header-icon-btn, .cart-icon-container .fa-shopping-cart { color: var(--text-color); font-size: 22px; text-decoration: none; transition: color 0.3s; }
    .social-icons a:hover, .header-icon-btn:hover, .cart-icon-container:hover .fa-shopping-cart { color: var(--primary-color); }
    .cart-icon-container { position: relative; cursor: pointer; }
    .cart-icon-container .fa-shopping-cart { font-size: 22px; }
    #cart-item-count { position: absolute; top: -8px; right: -10px; background: var(--secondary-color); color: #fff; font-size: 12px; font-weight: bold; border-radius: 50%; padding: 2px 6px; display: none; }
    .theme-toggle-btn { background: none; border: none; cursor: pointer; }
    .theme-toggle-btn i { font-size: 22px; color: var(--text-color); }
    .icon-wrapper { display: flex; align-items: center; gap: 15px; }
    h2.section-title { margin: 40px 0 20px; color: var(--primary-color); text-align: center; font-size: 32px; font-weight: bold; }
    .tagline { text-align: center; font-size: 20px; color: var(--secondary-color); margin-bottom: 12px; font-weight: bold; }
    .products { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; padding: 20px; max-width: 900px; margin: 0 auto; }
    .product-card { background: var(--card-bg); border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); padding: 22px; transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s; text-align: center; display: flex; flex-direction: column; justify-content: space-between; cursor: pointer; }
    .product-card:hover { transform: translateY(-8px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
    .product-card img { max-width: 100%; height: 200px; object-fit: contain; border-radius: 8px; margin-bottom: 15px; }
    .product-card h3 { margin: 10px 0 8px; font-size: 22px; color: var(--primary-color); font-weight: bold; }
    .product-card .price { font-size: 20px; color: var(--secondary-color); font-weight: bold; margin-bottom: 10px; }
    .product-card ul { list-style: none; text-align: left; margin: 15px 0 20px; padding-left: 0; }
    .product-card ul li { margin-bottom: 8px; font-size: 15px; color: var(--text-color); position: relative; padding-left: 20px; }
    .product-card ul li::before { content: '✔️'; color: var(--primary-color); position: absolute; left: 0; }
    .button-group { display: flex; justify-content: center; gap: 10px; margin-top: 15px; }
    .btn { padding: 10px 15px; color: #fff; text-decoration: none; border-radius: 6px; font-size: 15px; font-weight: bold; transition: background-color 0.3s; border: none; cursor: pointer; flex-grow: 1; }
    .btn.order-now-btn { background-color: var(--primary-color); }
    .btn.add-to-cart-btn { background-color: var(--secondary-color); color: #222; }
    .btn:hover { opacity: 0.85; }
    .about, footer { max-width: 900px; margin: 60px auto; background: var(--card-bg); padding: 40px; border-radius: 8px; box-shadow: 0 0 15px rgba(0,0,0,0.07); text-align: center; }
    footer { background: var(--footer-bg); margin-top: 50px; padding: 30px; }
    .about h2 { font-size: 28px; color: var(--primary-color); margin-bottom: 20px; }
    .about p { font-size: 17px; line-height: 1.8; margin-bottom: 15px; color: var(--text-color); }
    footer p { font-size: 15px; color: var(--text-color); margin-bottom: 10px; }
    footer a { color: var(--primary-color); text-decoration: none; margin: 0 5px; }
    footer a:hover { text-decoration: underline; }
    .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
    .modal-content { background-color: var(--modal-bg); margin: 5% auto; padding: 25px; border: 1px solid #888; width: 90%; max-width: 600px; border-radius: 10px; position: relative; font-family: 'Hind Siliguri', sans-serif; }
    .close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
    .modal-content h3 { color: var(--primary-color); margin-bottom: 20px; text-align: center; }
    .modal-content .form-group { margin-bottom: 15px; }
    .modal-content label { display: block; margin-bottom: 5px; text-align: left; font-weight: bold; }
    .modal-content input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; }
    .quantity-selector { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
    .quantity-selector button { font-size: 20px; width: 30px; height: 30px; border: 1px solid #ddd; background-color: #f5f5f5; cursor: pointer; border-radius: 4px; }
    .quantity-selector input { width: 50px; text-align: center; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; -moz-appearance: textfield; }
    .delivery-info { background-color: #f0fff0; border: 1px solid #d4edda; border-radius: 5px; padding: 15px; margin: 15px 0; font-size: 14px; }
    .total-price-display { margin-top: 20px; padding-top: 15px; border-top: 2px dashed #eee; text-align: right; font-size: 18px; font-weight: bold; }
    #singleOrderTotalPrice, #cartTotalPrice { color: var(--secondary-color); }
    .submit-btn { width: 100%; padding: 12px; background: var(--primary-color); color: #fff; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; }
    .thank-you-message { text-align: center; color: var(--primary-color); font-size: 18px; display: none; }
    #cartItemsContainer { max-height: 200px; overflow-y: auto; border-bottom: 1px solid #eee; margin-bottom: 15px; }
    .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-top: 1px solid #eee; gap: 10px; }
    .cart-item-details { flex-grow: 1; text-align: left; }
    .cart-item-quantity { display: flex; align-items: center; gap: 5px;}
    .cart-item-quantity button { font-size: 16px; width: 25px; height: 25px; border: 1px solid #ddd; background-color: #f5f5f5; cursor: pointer; border-radius: 4px; }
    .cart-item-quantity .item-quantity { font-size: 16px; padding: 0 5px; }
    .cart-item-total { min-width: 80px; text-align: right; }
    .cart-item-remove { color: red; cursor: pointer; font-size: 20px; }
    @media (max-width: 768px) {
      header { padding: 10px 15px; gap: 10px; }
      .header-left .site-title { display: none; }
      .products { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div id="preloader">
    <div class="loader"></div>
  </div>
  <div class="bg-jolcap"></div>

  <header>
    <div class="header-left">
      <a href="" class="logo-link"><img src="logo_2.jpg" alt="সবকিছু.com Logo"></a>
      <div class="site-title">
        <h1>সবকিছু.com</h1>
        <p>এক ক্লিকে সবকিছু।</p>
      </div>
    </div>
    <div class="header-right">
      <div class="social-icons icon-wrapper">
        <a href="https://www.facebook.com/share/16sSjnvbCa/" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="https://www.instagram.com/shobkichuofficial/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="mailto:shobkichuofficial@gmail.com" title="Email"><i class="fas fa-envelope"></i></a>
      </div>
      <button id="themeToggleBtn" class="theme-toggle-btn header-icon-btn">
        <i class="fas fa-moon"></i>
      </button>
      <div class="cart-icon-container">
        <i class="fas fa-shopping-cart"></i>
        <span id="cart-item-count">0</span>
      </div>
    </div>
  </header>

  <div class="tagline">এক ক্লিকে সবকিছু।</div>
  <h2 class="section-title">🔥 Suddho Deal এর বিখ্যাত চিংড়ি বালাচাও <br><span style="font-size:18px;font-weight:normal;color:#d6bc13;">👉 এখন এক্সক্লুসিভলি সবকিছু.com এ</span></h2>
  <section class="products">
    <div class="product-card"
      data-product-id="balachao_150g"
      data-product-name="Suddho Deal চিংড়ি বালাচাও (150g)"
      data-price="195"
      data-img-src="prodact_1.jpg"
      data-description="ঝালের আসল স্বাদ, শতভাগ খাঁটি মসলা ও ফ্রেশ ড্রাই চিংড়ির অনন্য সংমিশ্রণ। ভাত, ভর্তা বা স্ন্যাক্সের সাথে খাওয়ার জন্য একেবারে পারফেক্ট।">
      <img src="prodact_1.jpg" alt="চিংড়ি বালাচাও 150g">
      <h3>Suddho Deal চিংড়ি বালাচাও (150g)</h3>
      <p class="price">Price: ৳195</p>
      <ul>
        <li>Fresh dry shrimp</li>
        <li>Original spices</li>
        <li>Spicy hot taste</li>
        <li>100% Halal</li>
      </ul>
      <div class="button-group">
        <button class="btn order-now-btn">Order Now</button>
        <button class="btn add-to-cart-btn">Add to Cart</button>
      </div>
    </div>
    <div class="product-card"
      data-product-id="balachao_250g"
      data-product-name="Suddho Deal চিংড়ি বালাচাও (250g)"
      data-price="310"
      data-img-src="prodact_1.jpg"
      data-description="ঝালের আসল স্বাদ, শতভাগ খাঁটি মসলা ও ফ্রেশ ড্রাই চিংড়ির অনন্য সংমিশ্রণ। বড় পরিবার বা বেশি পরিমাণে খাবার জন্য পারফেক্ট।">
      <img src="prodact_1.jpg" alt="চিংড়ি বালাচাও 250g">
      <h3>Suddho Deal চিংড়ি বালাচাও (250g)</h3>
      <p class="price">Price: ৳310</p>
      <ul>
        <li>Fresh dry shrimp</li>
        <li>Original spices</li>
        <li>Spicy hot taste</li>
        <li>100% Halal</li>
      </ul>
      <div class="button-group">
        <button class="btn order-now-btn">Order Now</button>
        <button class="btn add-to-cart-btn">Add to Cart</button>
      </div>
    </div>
  </section>

  <section class="about">
    <h2>সবকিছু.com – আমাদের সম্পর্কে</h2>
    <p>সবকিছু.com একটি অনলাইন প্ল্যাটফর্ম যেখানে এক ক্লিকেই পাওয়া যায় আপনার দৈনন্দিন জীবনের সব প্রয়োজনীয় জিনিস। আমরা বিশ্বাস করি – সময়ের সঠিক ব্যবহার আর বিশুদ্ধ পণ্যের নিশ্চয়তা দিতে পারলেই গ্রাহকের জীবনে স্বাচ্ছন্দ্য আসে।</p>
    <p>আমাদের উদ্দেশ্য শুধু প্রোডাক্ট বিক্রি করা নয়, বরং গ্রাহকের কাছে খাঁটি, তাজা ও নির্ভরযোগ্য পণ্য পৌঁছে দেওয়া। এখানেই আমাদের ভিন্নতা।</p>
    <p>
      <strong>আমাদের বিশেষত্ব:</strong><br>
      ✅ All in one – Market to healthy grocery<br>
      ✅ 100% genuine & selected products<br>
      ✅ Customer trust & satisfaction is our first priority<br>
      ✅ Easy order, fast delivery
    </p>
    <p>সবকিছু.com-এর মূল লক্ষ্য হলো – আধুনিক প্রযুক্তিকে কাজে লাগিয়ে মানুষের জীবনকে সহজ করা। আমরা চাই আপনার কেনাকাটা হোক ঝামেলাহীন, নিরাপদ ও আনন্দদায়ক।</p>
    <p><strong>👉 কারণ, “যা দরকার, তাই পাবেন – সবকিছু.com”</strong></p>
  </section>

  <footer>
    <p>📧 Email: <a href="mailto:shobkichuofficial@gmail.com">shobkichuofficial@gmail.com</a></p>
    <p>📘 Facebook: <a href="https://www.facebook.com/share/16sSjnvbCa/" target="_blank">সবকিছু.com Page</a></p>
    <p>📸 Instagram: <a href="https://www.instagram.com/shobkichuofficial/" target="_blank">instagram.com/shobkichuofficial</a></p>
    <p>&copy; 2025 সবকিছু.com. All rights reserved.</p>
  </footer>

  <!-- Cart Modal -->
  <div id="cartModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="cartCloseBtn">&times;</span>
      <h3>Your Shopping Cart</h3>
      <div id="cartItemsContainer"></div>
      <div id="cartFormContainer" style="display: none;">
        <div class="total-price-display">Subtotal: <span id="cartSubtotal"></span></div>
        <hr style="margin: 15px 0;">
        <form id="cartOrderForm">
          <h4>Confirm Order</h4>
          <div class="form-group"><label for="cartCustomerName">Your Name</label><input type="text" id="cartCustomerName" name="customerName" required></div>
          <div class="form-group"><label for="cartAddress">Full Address</label><input type="text" id="cartAddress" name="address" required></div>
          <div class="form-group"><label for="cartPhoneNumber">Phone Number</label><input type="text" id="cartPhoneNumber" name="phoneNumber" required></div>
          <div class="delivery-info">Select delivery area, charge will be added automatically.</div>
          <div class="form-group"><input type="radio" id="cartInsideGopalganj" name="cart_delivery" value="50" required><label for="cartInsideGopalganj"> Inside Gopalganj (৳50)</label></div>
          <div class="form-group"><input type="radio" id="cartOutsideGopalganj" name="cart_delivery" value="130"><label for="cartOutsideGopalganj"> Other districts (৳130)</label></div>
          <div class="total-price-display">Total Price: <span id="cartTotalPrice"></span></div>
          <button type="submit" class="submit-btn">Confirm Order</button>
        </form>
      </div>
      <div id="cartThankYouMessage" class="thank-you-message"><p>Your order has been received. We will contact you soon. 😊</p></div>
    </div>
  </div>

  <!-- Order Modal -->
  <div id="orderModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="singleOrderCloseBtn">&times;</span>
      <h3>Confirm Your Order</h3>
      <form id="singleOrderForm">
        <div id="singleOrderFormContent">
          <input type="hidden" name="productName" id="singleProductName">
          <input type="hidden" name="quantity" id="singleQuantity">
          <div class="form-group"><label>Quantity</label><div class="quantity-selector"><button type="button" id="singleDecreaseQuantity">-</button><input type="text" id="singleQuantityInput" value="1" readonly><button type="button" id="singleIncreaseQuantity">+</button></div></div>
          <div class="form-group"><label for="singleCustomerName">Your Name</label><input type="text" id="singleCustomerName" name="customerName" required></div>
          <div class="form-group"><label for="singleAddress">Full Address</label><input type="text" id="singleAddress" name="address" required></div>
          <div class="form-group"><label for="singlePhoneNumber">Phone Number</label><input type="text" id="singlePhoneNumber" name="phoneNumber" required></div>
          <div class="delivery-info">Delivery charge will be added to product price.</div>
          <div class="form-group">
            <input type="radio" id="singleInsideGopalganj" name="single_delivery_location" value="50" required>
            <label for="singleInsideGopalganj">Inside Gopalganj (৳50)</label>
            <br>
            <input type="radio" id="singleOutsideGopalganj" name="single_delivery_location" value="130">
            <label for="singleOutsideGopalganj">Other districts (৳130)</label>
          </div>
          <div class="total-price-display">Total Price: <span id="singleOrderTotalPrice"></span></div>
          <button type="submit" class="submit-btn">Confirm Order</button>
        </div>
        <div id="singleThankYouMessage" class="thank-you-message"><p>Your order has been received. We will contact you soon. 😊</p></div>
      </form>
    </div>
  </div>

  <!-- Product Preview Modal -->
  <div id="productPreviewModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="previewCloseBtn">&times;</span>
      <div id="productPreviewContent" style="display: flex; gap: 20px;">
        <div id="previewImageContainer">
          <img src="" alt="Product Image" id="previewImage" style="max-width:100%;border-radius:8px;">
        </div>
        <div id="previewDetails">
          <h3 id="previewName"></h3>
          <p class="price" id="previewPrice"></p>
          <p id="previewDescription"></p>
          <div id="previewButtonGroup" class="button-group"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Preloader
    const preloader = document.getElementById('preloader');
    window.addEventListener('load', function() {
      preloader.classList.add('hidden');
      setTimeout(() => { preloader.style.display = 'none'; }, 750);
    });

    document.addEventListener('DOMContentLoaded', function() {
      // Your Google Sheet Script
      const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx4_WzkHKY3X6CTY3ws9ciRVScQrdGr7DHNOd7jKI4H-S6UR0_O39UjNRE3kssPL7BkcQ/exec';
      const productsSection = document.querySelector('.products');
      const body = document.body;
      const themeToggleBtn = document.getElementById('themeToggleBtn');
      const themeIcon = themeToggleBtn.querySelector('i');
      function setTheme(theme) {
        if (theme === 'dark') {
            body.classList.add('dark-mode');
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
            localStorage.setItem('theme', 'dark');
        } else {
            body.classList.remove('dark-mode');
            themeIcon.classList.remove('fa-sun');
            themeIcon.classList.add('fa-moon');
            localStorage.setItem('theme', 'light');
        }
      }
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
          setTheme(savedTheme);
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          setTheme('dark');
      } else {
          setTheme('light');
      }
      themeToggleBtn.addEventListener('click', () => {
          const currentTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
          setTheme(currentTheme);
      });

      // Cart system
      const cartIcon = document.querySelector('.cart-icon-container');
      const cartModal = document.getElementById('cartModal');
      const cartCloseBtn = document.getElementById('cartCloseBtn');
      const cartItemCount = document.getElementById('cart-item-count');
      const cartItemsContainer = document.getElementById('cartItemsContainer');
      const cartSubtotalSpan = document.getElementById('cartSubtotal');
      const cartTotalPriceSpan = document.getElementById('cartTotalPrice');
      const cartOrderForm = document.getElementById('cartOrderForm');
      const cartFormContainer = document.getElementById('cartFormContainer');
      const cartThankYouMessage = document.getElementById('cartThankYouMessage');
      let cart = JSON.parse(localStorage.getItem('sabkichuCart')) || [];

      function updateCartIcon() {
          const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
          cartItemCount.innerText = totalItems;
          cartItemCount.style.display = totalItems > 0 ? 'block' : 'none';
      }
      function saveCart() {
          localStorage.setItem('sabkichuCart', JSON.stringify(cart));
          updateCartIcon();
          renderCartModal();
      }
      function addToCart(productId, productName, price) {
          const existingItem = cart.find(item => item.id === productId);
          if (existingItem) { existingItem.quantity++; } else { cart.push({ id: productId, name: productName, price: price, quantity: 1 }); }
          saveCart();
      }
      function updateCartQuantity(productId, newQuantity) {
          const itemInCart = cart.find(item => item.id === productId);
          if (itemInCart) {
              if (newQuantity <= 0) {
                  cart = cart.filter(item => item.id !== productId);
              } else {
                  itemInCart.quantity = newQuantity;
              }
              saveCart();
          }
      }
      function renderCartModal() {
          cartItemsContainer.innerHTML = '';
          if (cart.length === 0) {
              cartItemsContainer.innerHTML = '<p style="text-align: center; padding: 20px;">Your cart is empty.</p>';
              cartFormContainer.style.display = 'none';
          } else {
              cartFormContainer.style.display = 'block';
              let subtotal = 0;
              cart.forEach(item => {
                  const itemElement = document.createElement('div');
                  itemElement.classList.add('cart-item');
                  itemElement.innerHTML = `
                      <div class="cart-item-details">
                          <span>${item.name}</span>
                      </div>
                      <div class="cart-item-quantity">
                          <button class="quantity-btn decrease-cart-item" data-id="${item.id}">-</button>
                          <span class="item-quantity">${item.quantity}</span>
                          <button class="quantity-btn increase-cart-item" data-id="${item.id}">+</button>
                      </div>
                      <div class="cart-item-total">
                          <small>৳${item.price * item.quantity}</small>
                      </div>
                      <span class="cart-item-remove" data-id="${item.id}">&times;</span>`;
                  cartItemsContainer.appendChild(itemElement);
                  subtotal += item.price * item.quantity;
              });
              cartSubtotalSpan.innerText = '৳' + subtotal;
              calculateCartTotal();
          }
      }
      function calculateCartTotal() {
          let subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
          let deliveryCharge = 0;
          const selectedDelivery = document.querySelector('input[name="cart_delivery"]:checked');
          if (selectedDelivery) { deliveryCharge = parseInt(selectedDelivery.value, 10); }
          const total = subtotal + deliveryCharge;
          cartTotalPriceSpan.innerText = '৳' + total;
      }

      cartIcon.addEventListener('click', () => { renderCartModal(); cartModal.style.display = 'block'; });
      cartCloseBtn.onclick = () => cartModal.style.display = 'none';
      cartItemsContainer.addEventListener('click', (e) => {
          const target = e.target;
          const productId = target.dataset.id;
          if (!productId) return;
          const itemInCart = cart.find(item => item.id === productId);

          if (target.classList.contains('cart-item-remove')) { updateCartQuantity(productId, 0); }
          if (target.classList.contains('increase-cart-item')) { updateCartQuantity(productId, itemInCart.quantity + 1); }
          if (target.classList.contains('decrease-cart-item')) { updateCartQuantity(productId, itemInCart.quantity - 1); }
      });
      document.querySelectorAll('input[name="cart_delivery"]').forEach(radio => radio.addEventListener('change', calculateCartTotal));

      cartOrderForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const submitBtn = this.querySelector('.submit-btn');
          const selectedDelivery = document.querySelector('input[name="cart_delivery"]:checked');
          if (!selectedDelivery) { alert('Please select delivery area.'); return; }
          submitBtn.disabled = true;
          submitBtn.innerText = 'Please wait...';
          let orderDetails = "--- Cart Order ---\n";
          let subtotal = 0;
          cart.forEach(item => {
              orderDetails += `- ${item.name} (Qty: ${item.quantity}) = ৳${item.price * item.quantity}\n`;
              subtotal += item.price * item.quantity;
          });
          const deliveryCharge = parseInt(selectedDelivery.value, 10);
          const total = subtotal + deliveryCharge;
          orderDetails += `\nSubtotal: ৳${subtotal}\nDelivery: ৳${deliveryCharge}\nTotal: ৳${total}`;
          const data = {
              customerName: document.getElementById('cartCustomerName').value,
              address: document.getElementById('cartAddress').value,
              phoneNumber: document.getElementById('cartPhoneNumber').value,
              orderDetails: orderDetails
          };
          fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) })
          .then(() => {
             cartFormContainer.style.display = 'none';
             cartThankYouMessage.style.display = 'block';
             cart = [];
             saveCart();
             setTimeout(() => {
                 cartModal.style.display = 'none';
                 cartFormContainer.style.display = 'block';
                 cartThankYouMessage.style.display = 'none';
             }, 4000);
          })
          .catch(error => { console.error('Error!', error.message); alert('Sorry, there was a problem.'); })
          .finally(() => { submitBtn.disabled = false; submitBtn.innerText = 'Confirm Order'; });
      });

      const singleOrderModal = document.getElementById('orderModal');
      const singleOrderCloseBtn = document.getElementById('singleOrderCloseBtn');
      const singleOrderForm = document.getElementById('singleOrderForm');
      let singleProductPrice = 0;

      const singleQuantityInput = document.getElementById('singleQuantityInput');
      const singleIncreaseBtn = document.getElementById('singleIncreaseQuantity');
      const singleDecreaseBtn = document.getElementById('singleDecreaseQuantity');
      const singleTotalPriceSpan = document.getElementById('singleOrderTotalPrice');

      function calculateSingleTotal() {
          const quantity = parseInt(singleQuantityInput.value, 10);
          let deliveryCharge = 0;
          const selectedRadio = document.querySelector('input[name="single_delivery_location"]:checked');
          if (selectedRadio) { deliveryCharge = parseInt(selectedRadio.value, 10); }
          const total = (singleProductPrice * quantity) + deliveryCharge;
          singleTotalPriceSpan.innerText = '৳' + total;
      }

      singleIncreaseBtn.addEventListener('click', () => { let q = parseInt(singleQuantityInput.value, 10) + 1; singleQuantityInput.value = q; document.getElementById('singleQuantity').value = q; calculateSingleTotal(); });
      singleDecreaseBtn.addEventListener('click', () => { let q = parseInt(singleQuantityInput.value, 10); if (q > 1) { q--; singleQuantityInput.value = q; document.getElementById('singleQuantity').value = q; calculateSingleTotal(); } });
      document.querySelectorAll('input[name="single_delivery_location"]').forEach(radio => radio.addEventListener('change', calculateSingleTotal));

      function openSingleOrderModal(productCard) {
          singleProductPrice = parseInt(productCard.dataset.price, 10);
          document.getElementById('singleProductName').value = productCard.dataset.productName;
          singleQuantityInput.value = 1;
          document.getElementById('singleQuantity').value = 1;
          document.getElementById('singleOrderFormContent').style.display = 'block';
          document.getElementById('singleThankYouMessage').style.display = 'none';
          singleOrderForm.reset();
          calculateSingleTotal();
          singleOrderModal.style.display = 'block';
      }
      singleOrderCloseBtn.onclick = () => singleOrderModal.style.display = 'none';

      singleOrderForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const submitBtn = this.querySelector('.submit-btn');
          const selectedDelivery = document.querySelector('input[name="single_delivery_location"]:checked');
          if (!selectedDelivery) { alert('Please select delivery area.'); return; }
          submitBtn.disabled = true;
          submitBtn.innerText = 'Please wait...';

          const quantity = singleQuantityInput.value;
          const productName = document.getElementById('singleProductName').value;
          const deliveryCharge = parseInt(selectedDelivery.value, 10);
          const total = (singleProductPrice * quantity) + deliveryCharge;
          let orderDetails = `--- Single Product Order ---\n- ${productName} (Qty: ${quantity}) = ৳${singleProductPrice * quantity}\nDelivery: ৳${deliveryCharge}\nTotal: ৳${total}`;

          const data = {
              customerName: document.getElementById('singleCustomerName').value,
              address: document.getElementById('singleAddress').value,
              phoneNumber: document.getElementById('singlePhoneNumber').value,
              orderDetails: orderDetails
          };

          fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) })
          .then(() => {
              document.getElementById('singleOrderFormContent').style.display = 'none';
              document.getElementById('singleThankYouMessage').style.display = 'block';
              setTimeout(() => {
                  singleOrderModal.style.display = 'none';
                  document.getElementById('singleOrderFormContent').style.display = 'block';
                  document.getElementById('singleThankYouMessage').style.display = 'none';
              }, 4000);
          })
          .catch(error => { console.error('Error!', error.message); alert('Sorry, there was a problem.'); })
          .finally(() => { submitBtn.disabled = false; submitBtn.innerText = 'Confirm Order'; });
      });

      // Product Preview Modal
      const previewModal = document.getElementById('productPreviewModal');
      const previewCloseBtn = document.getElementById('previewCloseBtn');
      function openPreviewModal(productCard) {
          document.getElementById('previewImage').src = productCard.dataset.imgSrc;
          document.getElementById('previewName').innerText = productCard.dataset.productName;
          document.getElementById('previewPrice').innerText = `Price: ৳${productCard.dataset.price}`;
          document.getElementById('previewDescription').innerText = productCard.dataset.description;
          const buttonGroup = document.getElementById('previewButtonGroup');
          buttonGroup.innerHTML = '';
          const orderBtn = document.createElement('button');
          orderBtn.className = 'btn order-now-btn';
          orderBtn.innerText = 'Order Now';
          orderBtn.onclick = function() {
            previewModal.style.display = 'none';
            openSingleOrderModal(productCard);
          };
          const cartBtn = document.createElement('button');
          cartBtn.className = 'btn add-to-cart-btn';
          cartBtn.innerText = 'Add to Cart';
          cartBtn.onclick = function(event) {
            addToCart(productCard.dataset.productId, productCard.dataset.productName, parseInt(productCard.dataset.price, 10));
            const target = event.target;
            target.innerText = 'Added!';
            setTimeout(() => { target.innerText = 'Add to Cart'; }, 1500);
          };
          buttonGroup.appendChild(orderBtn);
          buttonGroup.appendChild(cartBtn);
          previewModal.style.display = 'block';
      }
      previewCloseBtn.onclick = () => previewModal.style.display = 'none';
      productsSection.addEventListener('click', function(event) {
          const target = event.target;
          const productCard = target.closest('.product-card');
          if (!productCard) return;
          if (target.classList.contains('add-to-cart-btn')) {
              event.preventDefault();
              addToCart(productCard.dataset.productId, productCard.dataset.productName, parseInt(productCard.dataset.price, 10));
              const originalText = target.innerText;
              target.innerText = 'Added!';
              setTimeout(() => { target.innerText = 'Add to Cart'; }, 1500);
              return;
          }
          if (target.classList.contains('order-now-btn')) {
              event.preventDefault();
              openSingleOrderModal(productCard);
              return;
          }
          if (!target.classList.contains('btn')) {
              openPreviewModal(productCard);
          }
      });
      // Close modals if clicked outside of the content
      window.onclick = function(event) {
        if (event.target == cartModal) { cartModal.style.display = "none"; }
        if (event.target == singleOrderModal) { singleOrderModal.style.display = "none"; }
        if (event.target == previewModal) { previewModal.style.display = "none"; }
      };
      updateCartIcon();
    });
  </script>
</body>
</html>